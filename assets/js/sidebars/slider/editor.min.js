const isJSON=e=>{try{return JSON.parse(e)&&!!e}catch(e){return!1}},meta={get:()=>{const e=document.querySelector(".sidebar-slides").getAttribute("data-meta");let t=wp.data.select("core/editor").getEditedPostAttribute("meta")[e];return isJSON(t)?JSON.parse(t):{}},remove:e=>{const t=document.querySelector(".sidebar-slides").getAttribute("data-meta");data=meta.get(),delete data[e],wp.data.dispatch("core/editor").editPost({meta:{[t]:JSON.stringify(data)}})},update:(e,t)=>{const s=document.querySelector(".sidebar-slides").getAttribute("data-meta");data=meta.get(),data[e]=t,wp.data.dispatch("core/editor").editPost({meta:{[s]:JSON.stringify(data)}})}},sortSlidePanels=()=>{const e=meta.get(),t=e.slides_positions?e.slides_positions.includes(",")?e.slides_positions.split(","):[e.slides_positions]:[],s=document.querySelector(".sidebar-slides");if(t.length>0&&s.children.length>0){let e=[];t.forEach(t=>{const s=document.getElementById("sidebar-slide-"+t);e.push(s)}),e.length>0&&(s.innerHTML="",e.forEach(e=>{e instanceof Element&&s.appendChild(e)}))}};window.addEventListener("load",()=>{sortSlidePanels();const e=new Draggable.Swappable(document.querySelectorAll(".sidebar-slides"),{draggable:".sidebar-slides__item",delay:100,mirror:{appendTo:".sidebar-slides",constrainDimensions:!0},plugins:[Draggable.Plugins.ResizeMirror]});e.on("swappable:stop",()=>{let e=[];document.querySelectorAll(".sidebar-slides__item").forEach(t=>{let s=t.getAttribute("data-id");-1==e.indexOf(s)&&e.push(s)}),e=e.join(","),meta.update("slides_positions",e)})});